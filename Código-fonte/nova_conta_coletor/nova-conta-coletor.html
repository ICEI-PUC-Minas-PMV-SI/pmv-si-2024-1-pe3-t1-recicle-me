<!DOCTYPE html>
<html lang="pt-br">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="nova-conta-coletor.css">
    <link rel="shortcut icon" href="../logos/favicon.png" type="image/x-icon">
    <title>Cadastro</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Playfair+Display:ital,wght@0,400..900;1,400..900&display=swap');
    </style>
</head>

<body>
    <header class="cabecalho">
        <nav class="cabecalho-menu">
            <a id="link-texto" href="../home/home.html" class="inicio">Início</a>
            <a id="link-texto" href="../material/materiais.html" class="como-descartar">Como <br />Descartar</a>
            <a id="link-texto" href="../login/login-teste.html" class="login">Entrar</a>
        </nav>
    </header>

    <!-- Logo das Folhas -->
    <img src="../logos/3folhas-transparente.png" alt="logo-folhas" class="logo-folhas1">
    <img src="../logos/3folhas-transparente.png" alt="logo-folhas" class="logo-folhas2">
    <!-- Logo dos Detalhes das Folhas-->
    <img src="../logos/Vector.png" alt="logo-folhas" class="logo-detalhes1">
    <img src="../logos/Vector.png" alt="logo-folhas" class="logo-detalhes2">

    <main>
        <p class="txt-nova-conta">Nova <br> Conta</p>
        <form id="dadosFormulario" class="container">
            <div class="opcoes">
                <div class="opcao-item">
                    <input type="radio" id="descartar" name="opcao" value="descartar">
                    <label for="descartar">Quero descartar meu lixo</label>
                </div>
                <div class="opcao-item">
                    <input type="radio" id="divulgar" name="opcao" value="divulgar">
                    <label for="divulgar">Quero divulgar meu serviço</label>
                </div>
            </div>

            <div class="inputs">
                <fieldset>
                    <legend>Informações pessoais</legend>

                    <div class="input-container">
                        <label for="nome">Nome<span>*</span></label>
                        <input type="text" id="nome" name="nome" placeholder="Nome da empresa" disablead required>
                    </div>

                    <div class="input-container">
                        <label for="cnpj">CNPJ<span>*</span></label>
                        <input type="text" id="cnpj" name="cnpj" placeholder="CNPJ" disablead required>
                    </div>

                    <div class="input-container">
                        <label for="email">E-mail<span>*</span></label>
                        <input type="email" id="email" name="email" placeholder="E-mail" disablead required>
                    </div>

                    <div class="input-container">
                        <label for="telefone">Telefone<span>*</span></label>
                        <input type="text" id="telefone" name="telefone" placeholder="Telefone" disablead required>
                    </div>
                </fieldset>

                <fieldset>
                    <legend>Endereço</legend>

                    <div class="input-container">
                        <label for="logradouro">Logradouro<span>*</span></label>
                        <input type="text" id="logradouro" name="logradouro" placeholder="Logradouro" disablead
                            required>
                    </div>

                    <div class="input-container">
                        <label for="numero">Número<span>*</span></label required>
                        <input type="text" id="numero" name="numero" placeholder="Número" disablead required>
                        <label for="bairro">Bairro<span>*</span></label>
                        <input type="text" id="bairro" name="bairro" placeholder="Bairro" disablead required>
                    </div>

                    <div class="input-container">
                        <label for="cidade">Cidade<span>*</span></label>
                        <input type="text" id="cidade" name="cidade" placeholder="Cidade" disablead required>
                    </div>

                    <div class="input-container">
                        <label for="estado">Estado<span>*</span></label>
                        <input type="text" id="estado" name="estado" placeholder="Estado" disablead required>
                    </div>
                </fieldset>

                <fieldset>
                    <legend>Cadastre sua senha</legend>
                    <div class="input-container">
                        <label for="senha">Senha<span>*</span></label>
                        <input type="password" id="senha" name="senha" placeholder="Senha">
                    </div>

                    <div class="input-container">
                        <label for="confirmar-senha">Confirmar senha<span>*</span></label>
                        <input type="password" id="confirmar-senha" name="confirmar-senha"
                            placeholder="Confirmar senha">
                    </div>
                </fieldset>
            </div>

            <span class="asterisco">*</span><span class="mensagem">Campos de preenchimento obrigatório. </span>


            <div class="botoes">
                <button id="btnSalvar" type="submit">Salvar</button>
                <button type="button">Cancelar</button>
            </div>

            <div id="popupContainer" class="popupContainer">
                <div class="popupContent">
                    <span id="popupMessage"></span>
                    <button onclick="abrirLogin()" id="btnFecharPopup">Fechar</button>
                </div>
            </div>

        </form>
    </main>

    <footer class="rodape">
        <p class="rodape-texto">Recicle.me</p>
        <img class="rodape-img" src="../logos/logosvg.svg" alt="LogoRecicleME">
    </footer>

    <script src="nova-conta-coletor.js"></script>
    <script>
        var cadForm = document.getElementById("dadosFormulario");

        cadForm.addEventListener("submit", (e) => {

            e.preventDefault();

            var nome_coletor = document.getElementById("nome").value;
            var cnpj_coletor = document.getElementById("cnpj").value;
            var email_coletor = document.getElementById("email").value;
            var telefone_coletor = document.getElementById("telefone").value;
            var logradouro_coletor = document.getElementById("logradouro").value;
            var numero_coletor = document.getElementById("numero").value;
            var bairro_coletor = document.getElementById("bairro").value;
            var cidade_coletor = document.getElementById("cidade").value;
            var estado_coletor = document.getElementById("estado").value;
            var senha_coletor = document.getElementById("senha").value;
            var confirmar_coletor = document.getElementById("confirmar-senha").value;

            console.log(nome_coletor);
            console.log(cnpj_coletor);
            console.log(email_coletor);
            console.log(telefone_coletor);
            console.log(logradouro_coletor);
            console.log(numero_coletor);
            console.log(bairro_coletor);
            console.log(cidade_coletor);
            console.log(estado_coletor);
            console.log(senha_coletor);
            console.log(confirmar_coletor);

            if (nome_coletor && cnpj_coletor && email_coletor && telefone_coletor && logradouro_coletor && numero_coletor && bairro_coletor && cidade_coletor && estado_coletor && senha_coletor && confirmar_coletor) {

                var coletores = new Array();

                if (localStorage.hasOwnProperty("coletores")) {
                    coletores = JSON.parse(localStorage.getItem("coletores"));
                }

                coletores.push({ nome_coletor, cnpj_coletor, email_coletor, telefone_coletor, logradouro_coletor, numero_coletor, bairro_coletor, cidade_coletor, estado_coletor, senha_coletor, confirmar_coletor });

                localStorage.setItem("coletores", JSON.stringify(coletores));

                // Adiciona evento de clique ao botão Salvar
                document.querySelector('.botoes button[type="submit"]').addEventListener('click', function () {
                    mostrarPopup("Conta criada com sucesso!");
                });
                
            } else {
                alert("Ops! Necessário preencher todos os campos obrigatórios para prosseguir.")
            }
        });

        function abrirLogin() {
            window.location.href = "../login/login-teste.html";
        }

    </script>


</body>

</html>